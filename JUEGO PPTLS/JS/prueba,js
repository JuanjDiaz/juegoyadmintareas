let ataqueJugador;
let ataqueEnemigo;
let vidasJugador = 3;
let vidasEnemigo = 3;

function iniciarJuego() {
  let botonPiedra = document.getElementById("boton-piedra");
  botonPiedra.addEventListener("click", () => seleccionarAtaque("Piedra"));

  let botonPapel = document.getElementById("boton-papel");
  botonPapel.addEventListener("click", () => seleccionarAtaque("Papel"));

  let botonTijera = document.getElementById("boton-tijera");
  botonTijera.addEventListener("click", () => seleccionarAtaque("Tijera"));

  let botonReiniciar = document.getElementById("boton-reiniciar");
  botonReiniciar.addEventListener("click", reiniciarJuego);
}

function seleccionarAtaque(ataque) {
  ataqueJugador = ataque;
  document.getElementById("mascota-jugador").innerText = ataque;
  seleccionarAtaqueEnemigo();
}

function seleccionarAtaqueEnemigo() {
  const ataques = ["Piedra", "Papel", "Tijera"];
  ataqueEnemigo = ataques[aleatorio(0, 2)];
  document.getElementById("mascota-enemigo").innerText = ataqueEnemigo;
  combate();
}

function combate() {
  if (ataqueJugador === ataqueEnemigo) {
    crearMensaje("EMPATE");
  } else if (
    (ataqueJugador === "Piedra" && ataqueEnemigo === "Tijera") ||
    (ataqueJugador === "Papel" && ataqueEnemigo === "Piedra") ||
    (ataqueJugador === "Tijera" && ataqueEnemigo === "Papel")
  ) {
    crearMensaje("GANASTE");
    vidasEnemigo--;
    document.getElementById("vidas-enemigo").innerText = vidasEnemigo;
  } else {
    crearMensaje("PERDISTE");
    vidasJugador--;
    document.getElementById("vidas-jugador").innerText = vidasJugador;
  }

  revisarVidas();
}

function revisarVidas() {
  if (vidasEnemigo === 0) {
    crearMensajeFinal("Â¡FELICIDADES! GANASTE ðŸŽ‰");
  } else if (vidasJugador === 0) {
    crearMensajeFinal("LO LAMENTO, PERDISTE ðŸ˜¢");
  }
}

function crearMensaje(resultado) {
  let sectionMensajes = document.getElementById("mensajes");
  let parrafo = document.createElement("p");
  parrafo.innerText = `Tu ataque: ${ataqueJugador}, Ataque enemigo: ${ataqueEnemigo} - ${resultado}`;
  sectionMensajes.appendChild(parrafo);
}

function crearMensajeFinal(resultadoFinal) {
  let sectionMensajes = document.getElementById("mensajes");
  let parrafo = document.createElement("p");
  parrafo.innerText = resultadoFinal;
  sectionMensajes.appendChild(parrafo);

  document.getElementById("boton-piedra").disabled = true;
  document.getElementById("boton-papel").disabled = true;
  document.getElementById("boton-tijera").disabled = true;
}

function reiniciarJuego() {
  location.reload();
}

function aleatorio(min, max) {
  return Math.floor(Math.random() * (max - min + 1) + min);
}

window.addEventListener("load", iniciarJuego);